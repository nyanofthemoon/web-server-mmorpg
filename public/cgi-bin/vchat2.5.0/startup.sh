#!/bin/sh#*****************************************************************************# Sample Bash Shell (/bin/bash) or Bourne Shell (/bin/sh) startup script for# starting the VolanoChat server.  Type "./startup.sh -h" for help.# This script invokes the following Java virtual machines:#     Windows  - Sun J2SE 1.3.1 HotSpot Server VM#     Mac OS X - Apple J2SE 1.3.1 HotSpot Client VM#     FreeBSD  - Blackdown J2SE 1.3.1 (green threads, nojit)#     Linux    - Blackdown J2SE 1.3.1 (green threads, nojit)#     Solaris  - Sun J2SE 1.3.1 HotSpot Server VM#*****************************************************************************if [ "$1" = "-h" ]then    echo "Usage: startup.sh [-h] [-r] [file]"    echo "Start the VolanoChat server.  The default is to start the server"    echo "once and load its properties from the file \"conf/properties.txt\"."    echo "  -h    display this help information."    echo "  -r    restart the server if it stops."    echo "  file  the location of the server properties file."    exitfi# Define the Java system properties and class path.properties="-Dinstall.root=. -Dcatalina.home=."classpath=.# Define any settings specific to each operating system.os=`uname -s`case $os in    CYGWIN*)    # Cygwin 1.3 on Windows 2000        for file in lib/*.jar; do classpath="$classpath;$file"; done        java=/cygdrive/c/jdk1.3.1_05/bin/java        options="-server -Xmx256m -Xss64k"        ;;    Darwin)     # Apple Mac OS X Version 10.2        ulimit -n 10240        for file in lib/*.jar; do classpath="$classpath:$file"; done        java=/Library/Java/Home/bin/java        options="-Xmx256m -Xss64k"        ;;    FreeBSD)    # FreeBSD 4.6-RELEASE        ulimit -n 1024        for file in lib/*.jar; do classpath="$classpath:$file"; done        java=/usr/local/j2sdk1.3.1/bin/java        options="-green -Xmx256m -Xss64k"        ;;    Linux)      # Red Hat Linux 8.0 (Kernel 2.4.18, Glibc 2.2.95)        # Set a 2MB maximum stack size to avoid this bug:        # http://developer.java.sun.com/developer/bugParade/bugs/4466587.html        ulimit -s 2048        ulimit -n 1024        for file in lib/*.jar; do classpath="$classpath:$file"; done        java=/usr/local/j2sdk1.3.1/bin/java        options="-green -Xmx256m -Xss64k"        ;;    SunOS)      # Sun Solaris 8        ulimit -n 1024        for file in lib/*.jar; do classpath="$classpath:$file"; done        java=/usr/j2se/bin/java        options="-server -Xmx256m -Xss64k"        ;;    *)          # Unknown operating system        echo "Unrecognized operating system name: $os"        exit        ;;esac# Quit if we cannot find the Java executable file.if [ ! -x "$java" ]then    echo "Java virtual machine not found: $java"    exitfi# Print the Java version.$java $options -version# Start the VolanoChat server.# The "-r" option specifies to restart the server if it terminates.if [ "$1" = "-r" ]then    while :    do        echo "[`date`] Starting server ..."        $java $options $properties -cp $classpath COM.volano.Main $2        code=$?        echo "[`date`] Server terminated with exit code $code."        sleep 15    doneelse    $java $options $properties -cp $classpath COM.volano.Main $1fi